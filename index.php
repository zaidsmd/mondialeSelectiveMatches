<?php
$groupA = ["name" => "Group A",
    "countries" => [
        "Qatar" => ["name" => "Qatar", "flag" => "QA", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Ecuador" => ["name" => "Ecuador", "flag" => "EC", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Senegal" => ["name" => "Senegal", "flag" => "SN", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Netherlands" => ["name" => "Netherlands", "flag" => "NL", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0]
    ]
];
$groupB = ["name" => "Group B",
    "countries" => [
        "Georgia" => ["name" => "Georgia", "flag" => "GE", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "United_States" => ["name" => "United_States", "flag" => "US", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Iran" => ["name" => "Iran", "flag" => "IR", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Honduras" => ["name" => "Honduras", "flag" => "HN", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0]
    ]
];
$groupC = ["name" => "Group C",
    "countries" => [
        "Saudi_Arabia" => ["name" => "Saudi_Arabia", "flag" => "SA", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Poland" => ["name" => "Poland", "flag" => "PL", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Argentina" => ["name" => "Argentina", "flag" => "AR", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Mexico" => ["name" => "Mexico", "flag" => "MX", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0]
    ]
];
$groupD = ["name" => "Group D",
    "countries" => [
        "France" => ["name" => "France", "flag" => "FR", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Australia" => ["name" => "Australia", "flag" => "AU", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Denmark" => ["name" => "Denmark", "flag" => "DK", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Tunisia" => ["name" => "Tunisia", "flag" => "TN", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0]
    ]
];
$groupE = ["name" => "Group E",
    "countries" => [
        "Spain" => ["name" => "Spain", "flag" => "ES", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Germany" => ["name" => "Germany", "flag" => "DE", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Japan" => ["name" => "Japan", "flag" => "JP", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Costa Rica" => ["name" => "Costa Rica", "flag" => "CR", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0]
    ]
];
$groupF = ["name" => "Group F",
    "countries" => [
        "Belgium" => ["name" => "Belgium", "flag" => "BE", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Croatia" => ["name" => "Croatia", "flag" => "HR", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Morocco" => ["name" => "Morocco", "flag" => "MA", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Canada" => ["name" => "Canada", "flag" => "CA", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0]
    ]
];
$groupG = ["name" => "Group G",
    "countries" => [
        "Brazil" => ["name" => "Brazil", "flag" => "BR", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Cameroon" => ["name" => "Cameroon", "flag" => "CM", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Switzerland" => ["name" => "Switzerland", "flag" => "CH", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Serbia" => ["name" => "Serbia", "flag" => "RS", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0]
    ]
];
$groupH = ["name" => "Group H",
    "countries" => [
        "Portugal" => ["name" => "Portugal", "flag" => "PT", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "South_Korea" => ["name" => "South_Korea", "flag" => "KR", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Uruguay" => ["name" => "Uruguay", "flag" => "UY", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0],
        "Ghana" => ["name" => "Ghana", "flag" => "GH", "mp" => 0, "w" => 0, "d" => 0, "l" => 0, "gf" => 0, "ga" => 0, "gd" => 0, "pts" => 0]
    ]
];
$groups = [$groupA, $groupB, $groupC, $groupD, $groupE, $groupF, $groupG, $groupH];
include "PHP/head.php";
if (isset($_POST["group"])) {
    $group = $_POST["group"];
    $keys = array_keys($$group["countries"]);
    Calc($$group["countries"][$keys[0]],$$group["countries"][$keys[1]],"M1",$match1);
    Calc($$group["countries"][$keys[2]],$$group["countries"][$keys[3]],"M1",$match2);
    Calc($$group["countries"][$keys[0]],$$group["countries"][$keys[2]],"M2",$match3);
    Calc($$group["countries"][$keys[3]],$$group["countries"][$keys[1]],"M2",$match4);
    Calc($$group["countries"][$keys[0]],$$group["countries"][$keys[3]],"M3",$match5);
    Calc($$group["countries"][$keys[2]],$$group["countries"][$keys[1]],"M3",$match6);
    $groups = [$groupA, $groupB, $groupC, $groupD, $groupE, $groupF, $groupG, $groupH];
}
?>
    <section>
        <div class="line">
            Groups
        </div>
        <div class="container d-flex flex-wrap col-12">
            <?php
            include "PHP/cards.php"
            ?>
        </div>
    </section>
<section>
    <div class="line">
        Simulation
    </div>
    <?php
        include "PHP/matches.php";

         ?>
</section>
<?php
function Calc(&$country1,&$country2,$round,&$match){
    if ($_POST[$country1["name"].$round]!="" || $_POST[$country2["name"].$round]!=""){
        $match = [$country1["name"]=>(int)$_POST[$country1["name"].$round],
            $country2["name"]=>$_POST[$country2["name"].$round]];
        $country1["mp"] +=1;
        $country2["mp"] +=1;
        if ((int)$match[$country1["name"]] >(int) $match[$country2["name"]]){
            $country1["w"] +=1;
            $country1["gf"] += (int) $match[$country1["name"]];
            $country1["ga"] += (int) $match[$country2["name"]];
            $country1["gd"] = $country1["gf"] - $country1["ga"];
            $country1["pts"] += 3;
            $country2["l"] +=1;
            $country2["ga"] += (int) $match[$country1["name"]];
            $country2["gf"] += (int) $match[$country2["name"]];
            $country2["gd"] += $country2["gf"] - $country2["ga"];
        }elseif ((int)$match[$country1["name"]]<(int)$match[$country2["name"]]){
            $country2["gf"] += (int)$match[$country2["name"]];
            $country2["w"] +=1;
            $country2["gd"] = $country2["gf"] - $country2["ga"];
            $country2["ga"] += (int)$match[$country1["name"]];
            $country1["l"] +=1;
            $country2["pts"] += 3;
            $country1["ga"] += (int)$match[$country2["name"]];
            $country1["gf"] += (int)$match[$country1["name"]];
            $country1["gd"] += $country1["gf"] - $country1["ga"];
        }else {
            $country1["gf"] += (int)$match[$country1["name"]];
            $country2["gf"] += (int)$match[$country2["name"]];
            $country2["ga"] += (int)$match[$country1["name"]];
            $country1["ga"] += (int)$match[$country2["name"]];
            $country1["gd"] += $country1["gf"]-$country1["ga"];
            $country2["gd"] += $country2["gf"]-$country2["ga"];
            $country1["d"] +=1;
            $country2["d"] +=1;
            $country2["pts"] +=1;
            $country1["pts"] +=1;
        }
    }else {
        $match = null;
    }
}
include "PHP/foot.php";

